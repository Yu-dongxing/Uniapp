"use strict";const e=require("../../common/vendor.js"),t={data:()=>({username:"",password:"",error_text:""}),methods:{login(){if(this.username&&this.password){const t={username:this.username,password:this.password};e.index.request({url:"http://124.93.196.45:10001/dev-api/login",method:"POST",data:JSON.stringify(t),success:t=>{console.log(t.data),200===t.data.code&&t.data.token?(e.index.setStorageSync("token",t.data.token),e.index.reLaunch({url:"/pages/about/about"}),e.index.showToast({title:"登录成功",icon:"success",duration:2e3})):(e.index.showToast({title:"登录失败",icon:"none",duration:2e3}),this.error_text="用户名或密码错误")},fail:t=>{console.error("请求失败:",t),e.index.showToast({title:"请求失败",icon:"none",duration:2e3})}})}else this.error_text="请输入用户名和密码"}}};const o=e._export_sfc(t,[["render",function(t,o,s,a,r,n){return{a:r.username,b:e.o((e=>r.username=e.detail.value)),c:r.password,d:e.o((e=>r.password=e.detail.value)),e:e.t(r.error_text),f:e.o(((...e)=>n.login&&n.login(...e)))}}],["__scopeId","data-v-864f19bd"]]);wx.createPage(o);
